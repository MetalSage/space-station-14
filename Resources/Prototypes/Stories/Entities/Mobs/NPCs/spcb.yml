- type: entity
  save: false
  parent:
    - BaseMob
    - MobDamageable
    - MobAtmosExposed
  id: BaseSimpleMobSpcb
  abstract: true
  components:
    - type: Reactive
      groups:
        Flammable: [Touch]
        Extinguish: [Touch]
        Acidic: [Touch, Ingestion]
    - type: Internals
    - type: MovementSpeedModifier
      baseWalkSpeed : 4
      baseSprintSpeed : 4
    - type: StatusEffects
      allowed:
        - Stun
        - StaminaModifier
    - type: Buckle
    - type: StandingState
    - type: Tag
      tags:
        - DoorBumpOpener

- type: entity
  abstract: true
  parent:
    - BaseSimpleMobSpcb
    - MobCombat
    - MobFlammable
  id: SimpleSpaceMobBaseSpcb # Mob without barotrauma, freezing and asphyxiation (for space carps!?)
  components:
    - type: MeleeWeapon
      angle: 0
      animation: WeaponArcBite
    - type: Body
      prototype: Animal
    - type: Climbing
    - type: NameIdentifier
      group: GenericNumber
    - type: SlowOnDamage
      speedModifierThresholds:
        60: 0.7
        80: 0.5
    - type: MobPrice
      price: 1000 # Living critters are valuable in space.
    - type: Perishable

- type: entity
  parent:
    - SimpleSpaceMobBaseSpcb
  id: SimpleMobBaseSpcb # for air breathers
  abstract: true
  components:
    - type: Hunger
      thresholds: # only animals and rats are derived from this prototype so let's override it here and in rats' proto
        Overfed: 100
        Okay: 50
        Peckish: 25
        Starving: 10
        Dead: 0
      baseDecayRate: 0 # it is okay for animals to eat and drink less than humans, but more frequently
    - type: Thirst
      thresholds:
        OverHydrated: 200
        Okay: 150
        Thirsty: 100
        Parched: 50
        Dead: 0
      baseDecayRate: 0.04
    - type: StatusEffects
      allowed:
        - Stun
        - StaminaModifier
    - type: MobPrice
      price: 150
    - type: FloatingVisuals
    - type: Puller
      needsHands: false

- type: entity
  name: SPCB
  parent: SimpleMobBaseSpcb
  id: MobSpcb
  components:
    - type: Sprite
      drawdepth: SmallMobs
      sprite: Stories/Mobs/Aliens/spcb.rsi
      layers:
        - map: ["enum.DamageStateVisualLayers.Base"]
          state: spcb
    - type: MobThresholds
      thresholds:
        0: Alive
        100: Dead
    - type: DamageStateVisuals
      states:
        Alive:
          Base: spcb
        Dead:
          Base: dead
    - type: Stamina
      critThreshold: 100
    - type: SlowOnDamage
      speedModifierThresholds:
        40: 1.1
        50: 1.05
        70: 1.01
    - type: Physics
      bodyStatus: InAir
    - type: CanMoveInAir
    - type: Fixtures
      fixtures:
        fix1:
          shape:
            !type:PhysShapeCircle
            radius: 0.2
          density: 100
          mask:
            - SmallMobMask
          layer:
            - SmallMobLayer
    - type: StatusEffects
      allowed:
        - Stun
        - StaminaModifier
    - type: IntrinsicRadioReceiver
    - type: IntrinsicRadioTransmitter
      channels:
        - SpcbMind
    - type: ActiveRadio
      channels:
        - SpcbMind
      globalReceive: true
    - type: SpcbDevourer
      foodPreference: Humanoid
      shouldStoreDevoured: true
      chemical: Omnizine
      healRate: 20.0
      whitelist:
        components:
          - MobState
    - type: Spcb
    - type: MeleeWeapon
      altDisarm: false
      soundHit:
        path: /Audio/Weapons/Xeno/alien_claw_flesh3.ogg
      damage:
        types:
          Piercing: 5
          Slash: 5
    - type: Speech
      speechVerb: Ghost
    - type: Barotrauma
      damage:
        types:
          Blunt: 0
    - type: Tag
      tags:
        - CannotSuicide

- type: entity
  parent: BaseMobCarp
  id: MobCarpWithSpcb
  components:
    - type: Sprite
      layers:
        - map: [ "enum.DamageStateVisualLayers.Base" ]
          state: alive
        - map: [ "enum.DamageStateVisualLayers.BaseUnshaded" ]
          state: mouth
          shader: unshaded
    - type: RandomSprite
      available:
        - enum.DamageStateVisualLayers.Base:
            alive: Rainbow
          enum.DamageStateVisualLayers.BaseUnshaded:
            mouth: ""
    - type: Spcb
    - type: MeleeWeapon
      altDisarm: false
      soundHit:
        path: /Audio/Weapons/Xeno/alien_claw_flesh3.ogg
      damage:
        types:
          Piercing: 10
          Slash: 7
